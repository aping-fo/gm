<div class="pageHeader">
    <form id="pagerForm" onsubmit="return navTabSearch(this);" action="game/broadcast" method="post" onreset="$(this).find('select.combox').comboxReset()">
        <div th:fragment="searchBar">
            <input type="hidden" name="serverIds" th:value="${#strings.listJoin(request.serverIds,',')}"/>
            <input type="hidden" name="channelIds" th:value="${#strings.listJoin(request.channelIds,',')}"/>
            <input type="hidden" name="orderField" th:value="${request.orderField}"/>
            <input type="hidden" name="orderDirection" th:value="${request.orderDirection}"/>
            <input type="hidden" name="pageNum" th:value="${Pager.pageNum}"/>
            <input type="hidden" name="pageSize" th:value="${Pager.pageSize}"/>
            <div class="searchBar">
                <table class="searchContent">
                    <tr>
                        <td>广播类型:</td>
                        <td>
                            <select name="notifyType">
                                <option value="">全部</option>
                                <option value="1" th:selected="${request.notifyType==1}">通用提示</option>
                                <option value="2" th:selected="${request.notifyType==2}">江湖传闻</option>
                                <option value="3" th:selected="${request.notifyType==3}">系统公告</option>
                            </select>
                        </td>
                        <td>
                            <div>
                                <div class="buttonContent">
                                    <a class="button" href="server/select" rel="serverselect" mask="true" lookupGroup=""><span>区服筛选</span></a>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div>
                                <div class="buttonContent">
                                    <a class="button" href="channel/select" rel="channelselect" mask="true" lookupGroup=""><span>渠道筛选</span></a>
                                </div>
                            </div>
                        </td>
                        <td class="dateRange">
                            日期:
                            <input name="startDate" class="date readonly" readonly="readonly" type="text" value="" th:value="${request.startDate}">
                            <span class="limit">-</span>
                            <input name="endDate" class="date readonly" readonly="readonly" type="text" value="" th:value="${request.endDate}">
                        </td>
                        <td>
                            <div class="buttonActive">
                                <div class="buttonContent">
                                    <button type="submit">检索</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </form>
</div>
<div class="pageContent">
    <div class="panelBar">
        <ul class="toolBar">
            <li>
                <a title="发送广播消息" class="edit" href="game/dialog_newbroadcast" target="dialog" width="480" height="500" rel="dialog_newbroadcast" mask="true"><span>发送广播消息</span></a>
            </li>
        </ul>
    </div>
    <table class="table" layoutH="137">
        <thead>
        <tr>
            <th width="100">区服</th>
            <th width="100">渠道</th>
            <th width="100">类型</th>
            <th width="300">内容</th>
            <th width="150">创建时间</th>
            <th width="150">操作</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${list.size()!=0}" th:each="row,iterStat:${list}">
            <td th:text="${row.serverName}"></td>
            <td th:text="${row.channelName}"></td>
            <td th:if="${row.notifyType==1}" th:text="通用提示"></td>
            <td th:if="${row.notifyType==2}" th:text="江湖传闻"></td>
            <td th:if="${row.notifyType==3}" th:text="系统公告"></td>
            <td th:text="${row.content}"></td>
            <td th:text="${#dates.format(row.createTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <td>
                <a title="删除" class="button" th:href="@{game/broadcast(id=${row.id})}" target="navTab"><span>删除</span></a>
                <a title="修改" class="button" th:href="@{game/dialog_newbroadcast(id=${row.id})}"  target="dialog" width="480" height="500" rel="dialog_updatebroadcast" mask="true"><span>修改</span></a>
            </td>
        </tr>
        </tr>
        <tr th:if="${list.size()==0}"><td colspan="6" style="text-align: center">暂无数据</td></tr>
        </tbody>
    </table>
    <div th:replace="_include/pager"></div>
</div>
